<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
      body {
        padding-top: 50px;
        padding-bottom: 20px;
      }
    </style>
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="css/main.css">

    <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>

  </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">BitBucket Issue Viewer</a>
        </div>
      </div>
    </div>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <p>View BitBucket Issues Interactively</p>
        <p><a class="btn btn-primary btn-lg" role="button" id="excel">Export to Excel &raquo;</a></p>
        <div id="dvjson">
        </div>

      </div>
    </div>

    <div class="container">
      <!-- Example row of columns -->
      <div class="row">
        <table id="example" class="display" cellspacing="0" width="100%">
          <thead>
            <tr>
              <th>id</th>
              <th>title</th>
              <th>content</th>
              <th>assignee</th>
              <th>kind</th>
              <th>milestone</th>
              <th>priority</th>
              <th>reporter</th>
              <th>status</th>
              <th>version</th>
              <th>component</th>
              <th>edited_on</th>
              <th>updated_on</th>
              <th>content_updated_on</th>
              <th>created_on</th>
            </tr>
          </thead>
        </table>
      </div>

      <hr>

      <footer>
        <p>&copy; Mike Cunneen 2014</p>
      </footer>
    </div> <!-- /container -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.0.js"><\/script>')</script>

    <script src="js/vendor/bootstrap.min.js"></script>

    <script src="//cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
    <script src="js/jquery.battatech.excelexport.min.js"></script>
    <script>
      $(document).ready(function() {
        var issuesJSONObj;

        $.ajax({
          url: "js/db-1.0.json",
          cache: false
        })
                .done(function(data) {
                  issuesJSONObj = data;
                  $('#example').dataTable({
                    "data": issuesJSONObj.issues,
                    "columns": [
                      {"data": "id"},
                      {"data": "title"},
                      {"data": "content"},
                      {"data": "assignee"},
                      {"data": "kind"},
                      {"data": "milestone"},
                      {"data": "priority"},
                      {"data": "reporter"},
                      {"data": "status"},
                      {"data": "version"},
                      {"data": "component"},
                      {"data": "edited_on"},
                      {"data": "updated_on"},
                      {"data": "content_updated_on"},
                      {"data": "created_on"}
                    ]
                  });
                });

        $("#excel").click(function() {


          $("#dvjson").btechco_excelexport({
            containerid: "dvjson"
            , datatype: $datatype.Json
            , dataset: issuesJSONObj.issues
            , columns: [
              {headertext: "id", datafield: "id", ishidden: false},
              {headertext: "title", datafield: "title", ishidden: false},
              {headertext: "content", datafield: "content", ishidden: false},
              {headertext: "assignee", datafield: "assignee", ishidden: false},
              {headertext: "kind", datafield: "kind", ishidden: false},
              {headertext: "milestone", datafield: "milestone", ishidden: false},
              {headertext: "priority", datafield: "priority", ishidden: false},
              {headertext: "reporter", datafield: "reporter", ishidden: false},
              {headertext: "status", datafield: "status", ishidden: false},
              {headertext: "version", datafield: "version", ishidden: false},
              {headertext: "component", datafield: "component", ishidden: false},
              {headertext: "edited_on", datafield: "edited_on", ishidden: false},
              {headertext: "updated_on", datafield: "updated_on", ishidden: false},
              {headertext: "content_updated_on", datafield: "content_updated_on", ishidden: false},
              {headertext: "created_on", datafield: "created_on", ishidden: false}
            ]

          });
        });

      });
    </script>
    <script src="js/main.js"></script>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
      (function(b, o, i, l, e, r) {
        b.GoogleAnalyticsObject = l;
        b[l] || (b[l] =
                function() {
                  (b[l].q = b[l].q || []).push(arguments)
                });
        b[l].l = +new Date;
        e = o.createElement(i);
        r = o.getElementsByTagName(i)[0];
        e.src = '//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e, r)
      }(window, document, 'script', 'ga'));
      ga('create', 'UA-XXXXX-X');
      ga('send', 'pageview');
    </script>
  </body>
</html>
